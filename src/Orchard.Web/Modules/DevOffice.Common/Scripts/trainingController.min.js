devOfficeApp.controller("trainingController",["$scope","$filter","$location",function(n,t,i){function r(){$("#code-sample-social").attr("data-url",window.location.href);$("#sharelink-txt").val(window.location.href);u()}function u(){window.addthis&&(window.addthis=null,window._adr=null,window._atc=null,window._atd=null,window._ate=null,window._atr=null,window._atw=null);$.getScript("http://s7.addthis.com/js/300/addthis_widget.js#pubid=ra-53e944d61ebade5f").done(function(){addthis.init();addthis.toolbox("#code-sample-social");$(".social-share-container").show()})}n.selectedTypes=i.search().filters!=undefined?i.search().filters==""?[]:i.search().filters.toLowerCase().split(","):[];n.itemsToShow=[];n.itemsPerPage=15;n.pagesToShow=3;n.currentPage=1;n.model="";n.topViewedPnPs=[];n.showFirstPage=!1;n.showLastPage=!1;n.pagingRange=[];n.trainingItemsToShow=n.model.PatternsAndPractices;n.pageCount=function(){return Math.ceil(n.trainingItemsToShow.length/n.itemsPerPage)};n.sortedByHighToLow=!1;n.sortedByMostRecent=!1;n.showStartEllipsis=!1;n.showEndEllipsis=!1;n.totalTrainingItems=0;n.topViewed=[];$(window).resize(function(){window.innerWidth>=900?(n.pagesToShow=5,n.handlePaging()):(n.pagesToShow=3,n.handlePaging());n.$apply()});n.orderByViews=function(){n.sortedByHighToLow?(n.trainingItemsToShow.sort(function(n,t){return n.ViewCount-t.ViewCount}),n.sortedByHighToLow=!1,$("#mostPopularIcon").attr("src","/Themes/DevOffice/Content/Icons/devOffice_sort_up_grey_13x15.png"),$("#mostPopularIconxs").attr("src","/Themes/DevOffice/Content/Icons/devOffice_sort_up_orange_13x15.png")):(n.trainingItemsToShow.sort(function(n,t){return t.ViewCount-n.ViewCount}),n.sortedByHighToLow=!0,$("#mostPopularIcon").attr("src","/Themes/DevOffice/Content/Icons/devOffice_sort_down_grey_13x15.png"),$("#mostPopularIconxs").attr("src","/Themes/DevOffice/Content/Icons/devOffice_sort_down_orange_13x15.png"));$(".sorter.popular").addClass("active");$(".sorter.recent").removeClass("active");$("#mostRecentIcon").attr("src","/Themes/DevOffice/Content/Icons/devOffice_sort_updown_13x15.png");$("#mostRecentIconxs").attr("src","/Themes/DevOffice/Content/Icons/devOffice_sort_updown_13x15.png");n.updatePagination(1)};n.orderByDate=function(){n.sortedByMostRecent?(n.trainingItemsToShow.sort(function(n,t){return parseInt(n.DatePublished.substr(6))-parseInt(t.DatePublished.substr(6))}),n.sortedByMostRecent=!1,$("#mostRecentIcon").attr("src","/Themes/DevOffice/Content/Icons/devOffice_sort_up_grey_13x15.png"),$("#mostRecentIconxs").attr("src","/Themes/DevOffice/Content/Icons/devOffice_sort_up_orange_13x15.png")):(n.trainingItemsToShow.sort(function(n,t){return parseInt(t.DatePublished.substr(6))-parseInt(n.DatePublished.substr(6))}),n.sortedByMostRecent=!0,$("#mostRecentIcon").attr("src","/Themes/DevOffice/Content/Icons/devOffice_sort_down_grey_13x15.png"),$("#mostRecentIconxs").attr("src","/Themes/DevOffice/Content/Icons/devOffice_sort_down_orange_13x15.png"));$(".sorter.recent").addClass("active");$(".sorter.popular").removeClass("active");$("#mostPopularIcon").attr("src","/Themes/DevOffice/Content/Icons/devOffice_sort_updown_13x15.png");$("#mostPopularIconxs").attr("src","/Themes/DevOffice/Content/Icons/devOffice_sort_updown_13x15.png");n.updatePagination(1)};n.handlePaging=function(){var i,r,t;if(n.pagingRange=[],n.showFirstPage=!1,n.showLastPage=!1,n.showStartEllipsis=!1,n.showEndEllipsis=!1,n.pageCount()>n.pagesToShow){for(i=n.currentPage-Math.floor(n.pagesToShow/2),r=n.currentPage+Math.floor(n.pagesToShow/2);i<1;)i++,r++;while(r>n.pageCount())i--,r--;for(r<n.pageCount()&&(n.showLastPage=!0,r<n.pageCount()-1&&(n.showEndEllipsis=!0)),i>1&&(n.showFirstPage=!0,i>2&&(n.showStartEllipsis=!0)),t=i;t<=r;t++)n.pagingRange.push(t)}else for(t=1;t<=n.pageCount();t++)n.pagingRange.push(t)};n.$watch("model",function(){n.selectedTypes.length==0&&(n.selectedTypes=["introduction to office 365 development"]);n.getItemsOfSelectedTypes();n.currListSlice=n.trainingItemsToShow.slice(0,n.itemsPerPage);n.orderByViews();n.handlePaging();for(var t=0,i=n.model.AllTrainingItems.length;t<i;t++)n.model.AllTrainingItems[t].TechnicalTitle=n.model.AllTrainingItems[t].Title.replace(/ /g,"")+"-DetailLink",n.model.AllTrainingItems[t].External=n.model.AllTrainingItems[t].ExternalLink.indexOf(window.location.host)!=-1||n.model.AllTrainingItems[t].ExternalLink[0]=="/"?"":"_external",n.model.TopViewed.indexOf(n.model.AllTrainingItems[t].Id)!=-1&&n.topViewed.push(n.model.AllTrainingItems[t]);window.innerWidth>=900?(n.pagesToShow=5,n.handlePaging()):(n.pagesToShow=3,n.handlePaging());$("#code-sample-social").attr("data-url",window.location.href);$("#sharelink-txt").val(window.location.href)});n.updateSearchResults=function(){n.getItemsOfSelectedTypes();var i=t("filter")(n.trainingItemsToShow,n.searchText);n.trainingItemsToShow=i;n.updatePagination(1)};n.$watch("searchText",function(t){t!=undefined&&n.updateSearchResults()});n.updateViewCount=function(t,i){n.date=new Date;$.ajax("/devoffice.common/viewCount/post?itemid="+t+"&type="+i).error(function(){console.log("Unable to log view for item "+t)}).success(function(){})};n.updatePagination=function(t){n.currentPage=t;var i=(n.currentPage-1)*n.itemsPerPage;n.currListSlice=n.trainingItemsToShow.slice(i,i+n.itemsPerPage);n.handlePaging()};n.updateSelectedTypes=function(t){n.selectedTypes=[t];i.search("filters",n.selectedTypes.join(","));n.getItemsOfSelectedTypes();n.updatePagination(1);r();n.updateSearchResults()};n.getItemsOfSelectedTypes=function(){n.trainingItemsToShow=[];$.each(n.model.AllTrainingItems,function(){var t=!1;$.each(this.TermsTaggedList,function(i,r){n.selectedTypes.indexOf(r.toLowerCase())>-1&&(t=!0)});t&&n.trainingItemsToShow.indexOf(this)==-1&&n.trainingItemsToShow.push(this)})};n.clearFilters=function(){n.selectedTypes=[];n.updateSearchResults();$("input:checkbox").prop("checked",!1)};$("#sharelink-txt").click(function(){$(this).val()!="Choose filters and hit apply"&&($(this).focus(),$(this).select())})}]);
//# sourceMappingURL=trainingController.min.js.map
