(function(n){var t,i;if(n.fn.validate){n.calendars.picker.selectDateOrig=n.calendars.picker.selectDate;n.extend(n.calendars.picker.regional[""],{validateDate:"Please enter a valid date",validateDateMin:"Please enter a date on or after {0}",validateDateMax:"Please enter a date on or before {0}",validateDateMinMax:"Please enter a date between {0} and {1}",validateDateCompare:"Please enter a date {0} {1}",validateDateToday:"today",validateDateOther:"the other date",validateDateEQ:"equal to",validateDateNE:"not equal to",validateDateLT:"before",validateDateGT:"after",validateDateLE:"not after",validateDateGE:"not before"});n.extend(n.calendars.picker._defaults,n.calendars.picker.regional[""]);n.extend(n.calendars.picker,{selectDate:function(t,i){var u,r;this.selectDateOrig(t,i);u=n.data(t,n.calendars.picker.propertyName);!u.inline&&n.fn.validate&&(r=n(t).parents("form").validate(),r&&r.element("#"+t.id))},errorPlacement:function(t,i){var r=n.data(i[0],n.calendars.picker.propertyName);r?t[r.options.isRTL?"insertBefore":"insertAfter"](r.trigger.length>0?r.trigger:i):t.insertAfter(i)},errorFormat:function(t,i){var r=n.calendars.picker.curInst?n.calendars.picker.curInst.get("dateFormat"):n.calendars.picker._defaults.dateFormat;return n.each(i,function(n,i){t=t.replace(new RegExp("\\{"+n+"\\}","g"),i.formatDate(r)||"nothing")}),t}});t=null;n.validator.addMethod("cpDate",function(n,i){return t=i,this.optional(i)||f(n,i)},function(){var f=n.data(t,n.calendars.picker.propertyName),i=f.get("minDate"),r=f.get("maxDate"),u=n.calendars.picker._defaults;return i&&r?n.calendars.picker.errorFormat(u.validateDateMinMax,[i,r]):i?n.calendars.picker.errorFormat(u.validateDateMin,[i]):r?n.calendars.picker.errorFormat(u.validateDateMax,[r]):u.validateDate});function f(t,i){var r=n.data(i,n.calendars.picker.propertyName),u=r.options.multiSelect?t.split(r.options.multiSeparator):r.options.rangeSelect?t.split(r.options.rangeSeparator):[t],f=r.options.multiSelect&&u.length<=r.options.multiSelect||!r.options.multiSelect&&r.options.rangeSelect&&u.length==2||!r.options.multiSelect&&!r.options.rangeSelect&&u.length==1;if(f)try{var s=r.get("dateFormat"),e=r.get("minDate"),o=r.get("maxDate"),h=n(i);n.each(u,function(n,t){u[n]=r.options.calendar.parseDate(s,t);f=f&&(!u[n]||h.calendarsPicker("isSelectable",u[n])&&(!e||u[n].compareTo(e)!=-1)&&(!o||u[n].compareTo(o)!=1))})}catch(c){f=!1}return f&&r.options.rangeSelect&&(f=u[0].compareTo(u[1])!=1),f}n.validator.addClassRules("cpDate",{cpDate:!0});i={equal:"eq",same:"eq",notEqual:"ne",notSame:"ne",lessThan:"lt",before:"lt",greaterThan:"gt",after:"gt",notLessThan:"ge",notBefore:"ge",notGreaterThan:"le",notAfter:"le"};n.validator.addMethod("cpCompareDate",function(f,e,o){var c,a,s,l,h;if(this.optional(e)||(o=r(o),c=n(e).calendarsPicker("getDate"),a=u(e,o[1]),c.length==0||a.length==0))return!0;for(t=e,s=!0,l=0;l<c.length;l++){h=c[l].compareTo(a[0]);switch(i[o[0]]||o[0]){case"eq":s=h==0;break;case"ne":s=h!=0;break;case"lt":s=h<0;break;case"gt":s=h>0;break;case"le":s=h<=0;break;case"ge":s=h>=0;break;default:s=!0}if(!s)break}return s},function(f){var o=n.calendars.picker._defaults,e;return f=r(f),e=u(t,f[1],!0),e=f[1]=="today"?o.validateDateToday:e.length?e[0].formatDate():o.validateDateOther,o.validateDateCompare.replace(/\{0\}/,o["validateDate"+(i[f[0]]||f[0]).toUpperCase()]).replace(/\{1\}/,e)});function r(t){var i,r;if(typeof t=="string")t=t.split(" ");else if(!n.isArray(t)){i=[];for(r in t)i[0]=r,i[1]=t[r];t=i}return t}function u(t,i,r){if(i.newDate&&i.extraInfo)return[i];var u=n.data(t,n.calendars.picker.propertyName),f=null;try{typeof i=="string"&&i!="today"&&(f=u.options.calendar.parseDate(u.get("dateFormat"),i))}catch(e){}return f?[f]:i=="today"?[u.options.calendar.today()]:r?[]:n(i).calendarsPicker("getDate")}}})(jQuery);
//# sourceMappingURL=jquery.calendars.validation.min.js.map
